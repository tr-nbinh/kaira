@if (isLoading()) {
<app-product-detail-skeleton></app-product-detail-skeleton>
} @else {
<div class="mt-5">
    <!-- <div class="container">
        <nav class="breadcrumb">
            <a class="breadcrumb-item" href="#">Home</a>
            <a class="breadcrumb-item" href="#">Pages</a>
            <span class="breadcrumb-item active" aria-current="page">Shop</span>
        </nav>
    </div> -->

    <section id="product-detail" class="single-product py-5 no-padding-top">
        <div class="container">
            <div class="row g-5">
                <div class="col-12 col-lg-7">
                    <div class="row flex-column-reverse flex-lg-row">
                        <div class="col-md-12 col-lg-3">
                            <!-- product-thumbnail-slider -->
                            <div class="swiper product-thumbnail-slider" #thumbSlider>
                                <div class="swiper-wrapper">
                                    @for (img of currentVariant.images; track $index) {
                                    <div class="swiper-slide">
                                        <img [src]="img" alt="thumb image" class="img-fluid">
                                    </div>
                                    }
                                </div>
                            </div>
                            <!-- / product-thumbnail-slider -->
                        </div>
                        <div class="col-md-12 col-lg-9">
                            <!-- product-large-slider -->
                            <div class="swiper product-large-slider" #largeSlider>
                                <div class="swiper-wrapper">
                                    @for (image of currentVariant.images; track $index) {
                                    <div class="swiper-slide">
                                        <img [src]="image" alt="product large" class="img-fluid">
                                    </div>
                                    }
                                </div>
                                <div class="swiper-pagination" #swiperPagination></div>
                            </div>
                            <!-- / product-large-slider -->
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-5">
                    <section class="product-info pt-3">
                        <h1 class="product-name text-uppercase">{{product.name}}</h1>
                        <div class="rating-container d-flex align-items-center">
                            <div class="rating">
                                <svg width="32" height="32">
                                    <use xlink:href="#star-solid"></use>
                                </svg>
                            </div>
                            <div class="rating">
                                <svg width="32" height="32">
                                    <use xlink:href="#star-solid"></use>
                                </svg>
                            </div>
                            <div class="rating">
                                <svg width="32" height="32">
                                    <use xlink:href="#star-solid"></use>
                                </svg>
                            </div>
                            <div class="rating">
                                <svg width="32" height="32">
                                    <use xlink:href="#star-outline"></use>
                                </svg>
                            </div>
                            <div class="rating">
                                <svg width="32" height="32">
                                    <use xlink:href="#star-outline"></use>
                                </svg>
                            </div>
                            <span class="rating-count">(3.5)</span>
                        </div>
                        <div class="product-price">
                            <span class="fs-3 me-1">${{currentVariant.price - currentVariant.price *
                                ((currentVariant.discount ?? 0) / 100)}}</span>
                            @if (currentVariant.discount) {
                            <del>${{currentVariant.price}}</del>
                            }
                        </div>
                        <p>{{product.description}}.</p>
                        <div class="color-product-options mt-4">
                            <div class="color-toggle">
                                <div class="item-title">{{"COMMON.COLOR" | translate}}:
                                    <span>{{selectedColor?.name}}</span>
                                </div>
                                <div class="d-flex">
                                    @for (color of product.colors; track color.id ) {
                                    <div class="form-check">
                                        <label class="form-check-label" [for]="'color-id-' + color.id">
                                            <input class="form-check-input" type="radio" name="color-option"
                                                [id]="'color-id-' + color.id" [checked]="color.checked"
                                                (change)="onColorChange(color)">
                                            <span class="checkmark" [style.background-color]="color.hexCode"></span>
                                        </label>
                                    </div>
                                    }
                                </div>
                            </div>
                        </div>
                        @if (product.sizes && product.sizes.length) {
                        <div class="swatch d-flex flex-wrap option-1 mt-4">
                            <div class="item-title">{{"COMMON.SIZE" | translate}}:</div>
                            @for (size of product.sizes; track size.id) {
                            <div class="swatch-element">
                                <input class="swatch-input hide" id="small-size" type="radio" name="option-1" value="S">
                                <label class="swatch-label square-only" for="small-size">{{size.name}}</label>
                            </div>
                            }
                        </div>
                        }
                        <div class="product-action mt-4">
                            <div class="product-quantity d-flex align-items-center mb-3">
                                <div class="input-group product-qty me-3" style="max-width: 150px;">
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-light" (click)="decreaseQuantity()"
                                            [disabled]="currentVariant.quantity == 0">
                                            <svg width="16" height="16">
                                                <use xlink:href="#minus"></use>
                                            </svg>
                                        </button>
                                    </span>
                                    <input type="text" id="quantity" name="quantity"
                                        class="form-control input-number text-center" min="1"
                                        [(ngModel)]="selectedQuantity" [disabled]="currentVariant.quantity == 0">
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-light" (click)="increaseQuantity()"
                                            [disabled]="currentVariant.quantity == 0">
                                            <svg width="16" height="16">
                                                <use xlink:href="#plus"></use>
                                            </svg>
                                        </button>
                                    </span>
                                </div>
                                <p class="m-0">{{"SHOP.IN_STOCK" | translate:{quantity:currentVariant.quantity} }}</p>
                            </div>
                            <ng-container *appLoadingToggle="'cart-' + currentVariant.id">
                                <button class="btn btn-dark btn-lg text-uppercase me-3" (click)="addToCart()"
                                    [disabled]="currentVariant.quantity == 0">
                                    <span id="add-to-cart">{{"COMMON.ADD_TO_CART" | translate}}</span>
                                </button>
                            </ng-container>
                            <ng-container *appLoadingToggle="'wishlist-' + currentVariant.id">
                                <button class="btn btn-dark bg-dark" (click)="addToWishlist()">
                                    @if (currentVariant.isFavorite) {
                                    <svg width="24" height="24" viewBox="0 0 24 24" class="is-wishlisted">
                                        <use xlink:href="#heart-filled"></use>
                                    </svg>

                                    } @else {
                                    <svg width="24" height="24" viewBox="0 0 24 24">
                                        <use xlink:href="#heart"></use>
                                    </svg>
                                    }
                                </button>
                            </ng-container>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </section>
</div>
}